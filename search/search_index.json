{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Overview","text":"<p>Satoshi Finance is a decentralized stable coin protocol that allows user to mint a USD-pegged token called btUSD by using BTCB as collateral on BNB Smart Chain. </p> <p>The minimum allowed collateral value ratio to minted btUSD is 110%: for example, you could mint 1000 btUSD by collateralizing $1100 worth of BTCB.</p> <p>There are also some battle-tested mechanisms in place for the stability of btUSD. Learn more about how these mechanisms work in dedicated documentation sections.</p>"},{"location":"#key-features-in-summary","title":"Key Features in summary","text":"<ul> <li>Interest-Free: There is no interest for the minted btUSD no matter you are going to keep the collateralized position for a month or a year</li> <li>Efficient-Liquidation: btUSD holders could deposit into stability pool to provide offset reserve for liquidation and earn liquidated collateral plus SATO token in return</li> <li>Guaranteed-Low-Bound: When btUSD is traded below $1 peg, any btUSD holder could redeem 1 btUSD for $1 worth of collateral from the system, thus making an effective support for restoring the peg</li> <li>Immutable: All protocol parameters are determined at time of contracts deployment and no admin or DAO could change the values or upgrade the contracts </li> <li>Decentralization-First: Everyone could host a frontend User Interface to diversify the adoption and provide censorship resistance</li> </ul>"},{"location":"Efficient%20Redemption/","title":"What is redemption","text":"<p>Any btUSD holder could always redeem X btUSD against the system for $X worth of collateral. However, there would be a dynamic fee applied to redemption, corresponding to the redemption size related to the total supply of btUSD: the more btUSD redeemed, the more fee charged.</p> <p>For example, if the current redemption fee is 1% and the collateral price is $50000, then you redeem 1000 btUSD, you would get 0.0198 collateral (0.02 minus a redemption fee of 0.0002).</p> <p>All active Troves in the system will take a \"socialized\" share when redemption happens. This means each Trove would expect a decrease in BOTH collateral and debt but with a higher(healthier) ICR after redemption.</p> <p>This mechanism of redemption would bring less gas cost and encourage trove usage for better capital efficiency.</p> <p>Note if the system TCR is lower than MCR, then redemption is not allowed until TCR return to a higher level.</p>"},{"location":"Efficient%20Redemption/#why-redemption-is-needed","title":"Why redemption is needed?","text":"<p>Redemption enforce a low pricing bound for btUSD, i.e., when btUSD is traded below $1 peg, redemption incentivizes arbitrageur to help fixing the peg. </p> <p>For example, if btUSD is traded at $0.98 in the market, then arbitrageur could buy 100 btUSD from market using $98  then redeem it to receive $99 worth of collateral (considering 1% redemption fee), thus resulting a $1 net profit for arbitrageur. Since less btUSD exist in the market after redemption, the price peg is expected to restore efficiently.</p>"},{"location":"Efficient%20Redemption/#as-a-trove-owner-do-i-expect-a-loss-if-redemption-happens","title":"As a Trove owner, do I expect a loss if redemption happens?","text":"<p>If redemption happens, troves do NOT suffer any loss in face value since the redemption is executed at exactly the reported collateral price. However, a trove will lose part of its original collateral exposure.  </p>"},{"location":"Efficient%20Redemption/#as-a-trove-owner-what-will-happen-if-my-troves-debt-is-reduced-by-redemption-to-the-level-below-minimum-requirement","title":"As a Trove owner, what will happen if my trove's debt is reduced by redemption to the level below minimum requirement?","text":"<p>When a trove's debt is below minimum requirement (200 btUSD), anyone could close the trove by repaying any remaining debt and take a \"scavenge\" reward from the trove's collateral worth up to 10% of the minimum debt, i.e., 20 btUSD.</p>"},{"location":"Efficient%20Redemption/#math-for-redemption","title":"Math for redemption","text":"<p>Following are some math proof provided for interested users. Feel free to skip this section.</p>"},{"location":"Efficient%20Redemption/#m0-redemption-fee-calculation-and-decaying","title":"M0: Redemption fee calculation and decaying","text":"<p>The redemption fee is given by the formula \\((baseRate + 0.5\\%) * CollateralWorthOfRedeemed\\)</p> <p>The <code>baseRate</code> will increase by each redemption and decay to 0 over time at a half-life rate of 12 hours. Specifically, upon each redemption:</p> <ul> <li><code>baseRate</code> is decayed based on how many minutes are passed since the last fee event (either borrowing or redemption)</li> <li><code>baseRate</code> is incremented by an amount proportional to the fraction of the total btUSD supply that was redeemed</li> <li>\\(baseRateNew = baseRateOld + \\frac{btUSDRedeemed}{2 * btUSDTotalSupply}\\)</li> </ul> <p>Where <code>baseRateOld</code> is the value just prior to this redemption, and <code>baseRateNew</code> is the new value (and gets applied to this redemption).</p>"},{"location":"Efficient%20Redemption/#m1-icr-will-increase-after-redemption","title":"M1: ICR will increase after redemption","text":"<p>Suppose a trove (not liquidatable) with original collateral \\(C\\) and debt \\(D\\) when the collateral price is \\(p\\), now a redemption happens and bring socialized reduction to trove's collateral and debt: \\(\\Delta{c}\\) and \\(\\Delta{d}\\) respectively. Then we could compare the trove's ICR before and after redemption:</p> <ul> <li>Before redemption, \\(ICR_{before} = \\frac{C * p}{D} \\gt 110\\%\\)</li> <li>After redemption, \\(ICR_{after} = \\frac{(C - \\Delta{c}) * p}{D - \\Delta{d}} = \\frac{(C - \\Delta{c}) * p}{D - \\Delta{c} * p}\\)</li> <li>The trove's ICR would increase: \\(ICR_{after} - ICR_{before} = \\frac{(C - \\Delta{c}) * p}{D - \\Delta{c} * p} - \\frac{C * p}{D} = \\frac{\\Delta{c}*p*(C*p - D)}{(D - \\Delta{c} * p)*D} \\gt 0\\)</li> </ul>"},{"location":"Efficient%20Redemption/#m2-icr-relation-between-existing-troves-will-remain-the-same","title":"M2: ICR relation between existing Troves will remain the same","text":"<p>Suppose two existing troves (not liquidatable) with same original collateral \\(C\\) but different debts \\(D_{1} &lt; D_{2}\\) when the collateral price is \\(p\\), now a redemption happens and bring socialized reduction to both two trove's collaterals and debts: \\(\\Delta{c}\\) and \\(\\Delta{d}\\) respectively. Then we could compare these two trove's ICRs after redemption:</p> <ul> <li>Before redemption, \\(ICR_{1Before} = \\frac{C * p}{D_{1}} \\gt ICR_{2Before} = \\frac{C * p}{D_{2}} \\gt 110\\%\\)</li> <li>After redemption, \\(ICR_{1After} = \\frac{(C - \\Delta{c}) * p}{D_{1} - \\Delta{d}}\\)</li> <li>After redemption, \\(ICR_{2After} = \\frac{(C - \\Delta{c}) * p}{D_{2} - \\Delta{d}}\\)</li> <li>The two trove's ICRs ratio would be: \\(\\frac{ICR_{1After}}{ICR_{2After}} = \\frac{D_{2} - \\Delta{d}}{D_{1} - \\Delta{d}} \\gt \\frac{D_{2}}{D_{1}}\\)</li> </ul>"},{"location":"Efficient%20Redemption/#m3-icr-relation-between-new-and-old-troves-will-remain-the-same","title":"M3: ICR relation between new and old Troves will remain the same","text":"<p>Suppose an existing trove A (not liquidatable) with original collateral \\(C\\), debt \\(D\\) and stake \\(S_{A} = C * \\frac{S_{snapshot}}{C_{snapshot}}\\) when the collateral price is \\(p\\), now a redemption of worth-collateral size \\(c_{R1}\\) happens and bring socialized reduction to the trove's collateral and debt: \\(\\Delta{c_{A1}}\\) and \\(\\Delta{d_{A1}}\\) respectively. </p> <ul> <li>After this redemption, total collateral snapshot of the system decrease: \\(C_{snapshot} = C_{snapshot} - c_{R1}\\)</li> <li>After this redemption, trove A's ICR: \\(ICR_{A} = \\frac{(C - \\Delta{c_{A1}})* p}{D - \\Delta{d_{A1}}}\\)</li> </ul> <p>Now another trove B is created with same collateral \\(C\\) and debt \\(D\\) but its stake is calcualted as \\(S_{B} = C * \\frac{S_{snapshot}}{C_{snapshot} - c_{R1}} \\gt S_{A}\\), meaning it will get more share reduction for future redemption than trove A. At this moment, trove B's \\(ICR_{B} = \\frac{C*p}{D}\\) is less than \\(ICR_{A}\\)</p> <p>Some time passes. Then another redemption of worth-collateral size \\(c_{R2}\\) happens and brings socialized reduction to trove A's collateral and debt: \\(\\Delta{c_{A2}}\\) and \\(\\Delta{d_{A2}}\\) respectively. Note \\(c_{R2} \\lt (C_{snapshot} - c_{R1})\\) since you can't redeem all collateral in the system.</p> <p>Considering how redemption share is calculated with respect to trove' stake, we could get trove B's reduction share for this redemption: \\(\\Delta{c_{A2}} * \\frac{S_{B}}{S_{A}}\\) and \\(\\Delta{d_{A2}} * \\frac{S_{B}}{S_{A}}\\) respectively. So now we could compare both troves' ICR:</p> <ul> <li>trove A's \\(ICR_{A2} = \\frac{(C - \\Delta{c_{A1}} - \\Delta{c_{A2}})* p}{D - \\Delta{d_{A1}} - \\Delta{d_{A2}}} = \\frac{(C - \\Delta{c_{A2}})*p - \\Delta_{c_{A1}}*p}{D - \\Delta_{c_{A2}}*p- \\Delta_{c_{A1}}*p}\\)</li> <li>trove B's \\(ICR_{B2} = \\frac{(C - \\Delta{c_{A2}} * \\frac{S_{B}}{S_{A}}) * p}{D - \\Delta{d_{A2}} * \\frac{S_{B}}{S_{A}}}\\), we could note \\(\\frac{S_{B}}{S_{A}}\\) as \\(K \\gt 1\\)</li> <li>With a bit rearrange, trove B's ICR could be written as \\(ICR_{B2} = \\frac{(C - \\Delta{c_{A2}})*p - (K - 1) * \\Delta_{c_{A2}}*p}{D - \\Delta_{c_{A2}}*p - (K - 1) * \\Delta_{c_{A2}}*p}\\)</li> <li>By observing the formula of trove A's and trove B's ICR, the problem now comes down to a question: which is larger? \\(\\Delta_{c_{A1}}\\) or \\((K - 1) * \\Delta_{c_{A2}}\\)</li> <li>\\(\\frac{(K - 1)*\\Delta_{c_{A2}}}{\\Delta_{c_{A1}}} = (\\frac{C_{snapshot}}{C_{snapshot} - c_{R1}}-\\frac{C_{snapshot - c_{R1}}}{C_{snapshot - c_{R1}}})*\\frac{\\Delta{c_{A2}}}{\\Delta_{c_{A1}}}=\\frac{c_{R1}}{C_{snapshot} - c_{R1}}*\\frac{\\Delta{c_{A2}}}{\\Delta_{c_{A1}}} \\le \\frac{c_{R1}}{C_{snapshot} - c_{R1}}*\\frac{c_{R2}}{c_{R1}} \\lt 1\\)</li> <li>Applying similar proof in above M1 section, we could know that \\(ICR_{A2} &gt; ICR_{B2}\\) still holds</li> </ul>"},{"location":"How%20to%20mint%20btUSD/","title":"How to mint btUSD","text":""},{"location":"How%20to%20mint%20btUSD/#over-collateralized-position-trove","title":"Over-Collateralized Position: Trove","text":"<p>Satoshi Finance utilize a classical over-collateralization pattern for issuance of the stable coin: btUSD. Each wallet address could have up to one over-collateralized position called \"trove\" which symbolize its collection of assets within Satoshi Finance: collateral and debt(minted btUSD).</p> <p>BTCB will be used as the collateral and the minimum collateralization ratio allowed, i.e., the market face-value of collateral provided against the minted amount of btUSD, is as low as 110%(Minimum Collateralization Ratio), i.e., a user(just any wallet address) could open its trove by providing $1100 worth of BTCB and take out 1000 btUSD. But note that any trove with a collateralization ratio(Individual Collateralization Ratio) less than 110% will be subject to liquidation, thus keep a reasonable higher collateralization ratio is strongly recommended.</p> <p>There is also a friendly minimum requirement on how much btUSD a trove should at least mint: 200.</p>"},{"location":"How%20to%20mint%20btUSD/#any-fee-would-be-paid-to-mint-btusd","title":"Any fee would be paid to mint btUSD?","text":"<p>As long as a user mint btUSD from its own trove, an one-time mint fee is charged on the minted amount and included into the trove's total debt. Please note that the mint fee is variable (and determined by algorithm coded in smart contract) and has a minimum floor value of 0.5% in normal scenario. The fee is <code>0%</code> during Recovery Mode which is explained below. </p> <p>No additional interest will be charged so user doesn't need to worry about how long should they keep the trove open. The costs to keep hold of minted btUSD for one week and one year are the same thus make Satoshi Finance a good fit for leveraged bitcoin long trader in the long run. </p> <p>The mint fee is calculated by multiplying the amount of minted btUSD with the sum of fee floor value(<code>0.5%</code>) and a \"baseRate\". For example: If the mint fee stands at <code>1%</code> and the user wants to mint <code>1000</code> btUSD then a fee of <code>10</code> btUSD will be charged and the user's trove will have a total debt of <code>1010</code> btUSD.</p>"},{"location":"How%20to%20mint%20btUSD/#what-is-recovery-mode-and-normal-mode","title":"What is Recovery Mode and Normal Mode","text":"<p>We calcualte the ratio of the market face-value of total collateral locked in system against the total minted btUSD as Total Collateralization Ratio. For example, there are two troves in the system with same collateral amount of 1 BTCB, but with different debts of <code>20000</code> btUSD and <code>10000</code> btUSD respectively. If market price of collateral is <code>$40000</code>, then TCR could be calculated as \\(\\frac{(1+1)*40000}{20000+10000}=266.67\\%\\)</p> <p>When TCR is less than <code>130%</code>(Critical Collateralization Ratio), Recovery Mode is triggered. Otherwise, the system is in Normal Mode.</p> <p>When system is in Recovery Mode, there will be more restrictions for operations like open trove or adjust trove to guarantee the system TCR shall not deteriorates further. And more troves may become liquidatable in Recovery Mode to faciliate a quick safe-state restore of the system.</p>"},{"location":"SATO%20staking/","title":"SATO Staking","text":""},{"location":"SATO%20staking/#how-does-staking-work-in-satoshi-finance","title":"How does staking work in Satoshi Finance?","text":"<p>Simply stake your SATO token to the dedicated staking contract. </p> <p>Every staker will earn a proportional share of all protcol fee:</p> <ul> <li>mint fee in btUSD</li> <li>redemption fee in collateral</li> <li>flashloan fee in collateral</li> </ul>"},{"location":"SATO%20staking/#what-is-premium-staking","title":"What is premium staking?","text":"<p>You could choose to stake 1024 SATO tokens permanently to access premium privileges within the system:</p> <ul> <li>less mint fee floor of <code>0.4%</code> compared to usual <code>0.5%</code></li> <li>less redemption fee floor of <code>0.4%</code> compared to usual <code>0.5%</code></li> <li>more collateral surplus if liquidated in Recovery Mode</li> </ul> <p>Note the permanently staked SATO for premium will continue earning a share of the fees.</p>"},{"location":"SATO%20staking/#is-there-a-lock-up-period","title":"Is there a lock-up period?","text":"<p>No, you can withdraw your staked SATO plus fee earnings at any time. </p> <p>But note the 1024 SATO token used for premium staking is permanently locked, e.g., cant be withdrawn.</p>"},{"location":"SATO%20staking/#can-i-stake-btusd","title":"Can I stake btUSD?","text":"<p>You can only stake SATO tokens. btUSD can be deposited into the Stability Pool for SATO rewards. </p>"},{"location":"Testnet/","title":"Testnet usage","text":""},{"location":"Testnet/#test-collateral-faucet","title":"Test collateral faucet","text":"<p>There is a customized collateral contract for test purpose on BNB Smart Chain testnet. </p> <p>Connect your wallet in bscscan and request some test collateral from there.</p> <p>Note that there is a limit of 10 collateral tokens per day</p> <p></p> <p>In above screenshot, input parameter of <code>wad</code> is <code>1000000000000000000</code> for 1 collateral token since the decimal is 18</p>"},{"location":"Testnet/#test-btusd-lp-faucet","title":"Test btUSD LP faucet","text":"<p>On testnet, same token as above test collateral is used for LP Mining</p> <p></p>"},{"location":"btUSD%20stability%20pool%20and%20liquidation/","title":"Liquidation and Stability Pool","text":""},{"location":"btUSD%20stability%20pool%20and%20liquidation/#what-is-the-stability-pool","title":"What is the Stability Pool?","text":"<p>The Stability Pool provides source of liquidity to repay debt for liquidatable troves and ensure that the total collateral locked is worth more than the total minted btUSD, i.e., always over-collateralized.</p> <p>When a trove is liquidated, an amount of btUSD equal to the trove's debt is offset within Stability Pool as repayment(burned directly). As a result, the trove's collateral is distributed among all participants of the Stability Pool. </p> <p>The Stability Pool is funded by actors who deposit btUSD into it (called Stability Providers). Over time as liquidation happens, Stability Providers will lose part of their btUSD deposits as repayment offset, but earn a proportional amount of the collateral from the liquidation. Due to the nature of MCR, it is expected that Stability Providers will typically receive a greater face-value of collateral than the debt they pay off. </p> <p>For example, if a trove of debt size 1000 btUSD is liquidated at ICR of <code>108%</code>, then Stability Provider will earn $1080 worth of collateral by fully repaying 1000 btUSD debt.</p>"},{"location":"btUSD%20stability%20pool%20and%20liquidation/#why-should-i-deposit-btusd-to-the-stability-pool","title":"Why should I deposit btUSD to the Stability Pool?","text":"<p>Stability Providers will earn liquidation gains (as explained above) and receive extra growth rewards in form of SATO tokens.</p>"},{"location":"btUSD%20stability%20pool%20and%20liquidation/#why-liquidation-is-needed","title":"Why liquidation is needed?","text":"<p>To make sure that the all minted btUSD is fully backed by adequate collateral, troves that fall under the some conditions like below MCR(<code>110%</code>) will be liquidated.</p> <p>Note in Recovery Mode, troves with ICR less than the system TCR are also susceptible to liquidation but may expect a collateral surplus for the trove owner to claim. </p> <p>For example, if the system TCR drops to <code>120%</code>, then system is in recovery mode and a trove with ICR <code>115%</code> which is less than TCR will be liquidated but the trove owner could have \\(115\\% - 110\\%=5\\%\\) of its collateral as surplus to claim back. </p> <p>Thus it is recommended to keep the trove ICR remain at a relatively higher level like <code>150%</code> or even above <code>200%</code> in volatile market conditions</p>"},{"location":"btUSD%20stability%20pool%20and%20liquidation/#who-can-liquidate-troves","title":"Who can liquidate Troves?","text":"<p>Anybody can liquidate a Trove as soon as it become liquidatable. The liquidation initiator will receive up to <code>0.5%</code> of the trove's collateral as a reward for this service.</p>"},{"location":"btUSD%20stability%20pool%20and%20liquidation/#can-i-withdraw-my-deposit-from-stability-pool-whenever-i-want","title":"Can I withdraw my deposit from Stability Pool whenever I want?","text":"<p>Normally, you can make a withdrawal request for all your deposit in Stability Pool at any time. But the withdrawal request could only be confirmed after 30 minutes. </p> <p>However, please note that no withdrawal request could be made if the system TCR is below CCR (system in Recovery Mode).</p>"},{"location":"btUSD%20stability%20pool%20and%20liquidation/#how-do-you-determine-the-price-of-collateral","title":"How do you determine the price of collateral?","text":"<p>The protocol uses primarily Chainlink\u2019s BTC:USD price feed, but will failover to the Binance Oracle under the following (extreme) conditions:</p> <ul> <li>Chainlink price has not been updated for more than 4 hours</li> <li>Chainlink response call reverts, returns an invalid price or an invalid timestamp</li> <li>The price change between two consecutive Chainlink price updates is \\(\\gt 50\\%\\)</li> </ul>"},{"location":"btUSD%20stability%20pool%20and%20liquidation/#what-happens-if-the-stability-pool-is-empty-when-there-is-liquidation","title":"What happens if the Stability Pool is empty when there is liquidation?","text":"<p>If the Stability Pool is empty, the system will apply a secondary liquidation mechanism called redistribution. It means that the system will redistribute the debt and collateral from liquidated troves to all other remaining troves. The redistribution is in proportion to the individual trove's stake (which is related to its collateral amount). </p> <p>Consider a case when collateral price is <code>$1992.87</code> and trove D is liquidated with its debt &amp; collateral redistributed among trove A,B,C: </p>"}]}